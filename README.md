GFWList2PAC
===========

[![PyPI version]][PyPI] [![Build Status]][Travis CI]

Generate fast PAC file from gfwlist. Examples: [fast mode] / [precise mode].

Fast mode: use O(1) domain lookup

Precise mode: use adblock plus engine

v2ex
----

http://www.v2ex.com/t/148241

gfwlist2pac 1.1 增加精确模式

用 –precise 打开这个模式。生成的 PAC 文件内会集成 Adblock Plus 的匹配引擎 ，直接解析 GFWList，实现精确匹配，同时速度依然接近 O(1)，远快于 SwitchySharp 生成的垃圾 PAC 文件。只测了 Chrome，不知道兼不兼容 IE。

https://github.com/clowwindy/gfwlist2pac/blob/master/test/proxy_abp.pac

测试结果：

    Testing fast mode pac generated by gfwlist2pac
    avg: 0.49ns
    
    Testing precise mode pac generated by gfwlist2pac
    avg: 1.53ns
    
    Testing pac generated by switchysharp
    avg: 784.60ns

另外需要说明一下，ABP 的代码是 GPLv3 的。
第 1 条附言  ·  1 天前
GitHub 上的 PAC 只是个示例文件。可以根据自己的需求指定 proxy 和自定义黑白名单等规则生成 PAC 文件。也不要把 PAC 地址直接填成 GitHub 上的地址。

有几种使用方法：

1. 直接用在 ShadowsocksX / Shadowsocks for Windows 里，var proxy = 保持和原有自带 PAC 的不变
2. 要么用 SwitchySharp 导入本地 PAC 文件（不要直接填 URL）
3. 要么搭一个 HTTP 服务器并指定正确的 content-type，因为估计大部分人都搭不出来所以不推荐
4. 要么下到硬盘上 PAC 地址填本地 URL，兼容性不好也不推荐


### Usage

    pip install gfwlist2pac
    
    usage: gfwlist2pac [-h] [-i GFWLIST] -f PAC -p PROXY [--user-rule USER_RULE]
                   [--precise]

    optional arguments:
      -h, --help            show this help message and exit
      -i GFWLIST, --input GFWLIST
                            path to gfwlist
      -f PAC, --file PAC    path to output pac
      -p PROXY, --proxy PROXY
                            the proxy parameter in the pac file, for example,
                            "SOCKS5 127.0.0.1:1080;"
      --user-rule USER_RULE
                            user rule file, which will be appended to gfwlist
      --precise             use adblock plus algorithm instead of O(1) lookup

### Performance

The PAC generated by GFWList2PAC is 1600x faster than SwitchySharp.

    Testing fast mode pac generated by gfwlist2pac
    avg: 0.49us

    Testing precise mode pac generated by gfwlist2pac
    avg: 1.53us

    Testing pac generated by switchysharp
    avg: 784.60us

[Build Status]: https://img.shields.io/travis/clowwindy/gfwlist2pac/master.svg?style=flat
[Travis CI]:    https://travis-ci.org/clowwindy/gfwlist2pac
[PyPI]:         https://pypi.python.org/pypi/gfwlist2pac
[PyPI version]: https://img.shields.io/pypi/v/gfwlist2pac.svg?style=flat
[fast mode]:    https://github.com/clowwindy/gfwlist2pac/blob/master/test/proxy.pac
[precise mode]: https://github.com/clowwindy/gfwlist2pac/blob/master/test/proxy_abp.pac
